%h2 Media picker
%div#open-google-picker.button{:onclick => "openDrive()"}
  Ouvrir Google Drive Picker

%div#app{{'v-show' => 'visible'}}
  %transition{:name => "fade"}
    %div#form-picker
      %table
        %tr
          %th
            %input{:type=>"checkbox", :name=>"test", :value=>1, :v => {'model' => 'selectAll'}}
          %th ID
          %th Thumbnail
          %th
            %select{'v-model' => 'typeAll'}
              %option{:value => ' ', :selected => 'selected', :disabled => 'disabled'}
                Type
              %option{{'v-for' => 'type in types'}, {':value' => 'type'}}
                {{ type.name }}
          %th
            %select{{'v-model' => 'eventAll'}}
              %option{:value => ' ', :selected => 'selected', :disabled => 'disabled'}
                Ã‰vent
              %option{{'v-for' => 'event in events'}, {':value' => 'event'}}
                {{ event.name }}


        %tr{{'v-for' => 'medium in media'}}
          %td
            %input{:type=>"checkbox", :name=>"test",  :v => {'model' => "medium.selected"}}
          %td
            {{ medium.id }}
          %td
            %a{{':href' => 'medium.link'}, {'target' =>'_blank'}}
              %img{{':src' => 'generateURL(medium)'}}
          %td
            %select{'v-model' => 'medium.type'}
              %option{{'v-for' => 'type in types'}, {':value' => 'type'}}
                {{ type.name }}
          %td
            %select{'v-model' => 'medium.event'}
              %option{{'v-for' => 'event in events'}, {':value' => 'event'}}
                {{ event.name }}


%div#google-drive-picker

- if current_user
  :javascript
     let email = '#{current_user.email}'
     let oauth_token = '#{current_user.oauth_token}'
  = javascript_include_tag 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js', 'data-turbolinks-track' => true
  = javascript_include_tag 'https://apis.google.com/js/api.js', 'data-turbolinks-track' => true
  = javascript_include_tag 'https://apis.google.com/js/client.js'
  = javascript_include_tag 'test', 'data-turbolinks-track' => true
  = javascript_include_tag 'google-drive-picker', 'data-turbolinks-track' => true

